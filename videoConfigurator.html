 <html>
    <head>
        <title>Incendant Web Widget Configurator</title>
        <script type="text/javascript">
            String.prototype.replaceAll = function (find, replace) {
                var str = this;
                return str.replace(new RegExp(find, 'g'), replace);
            };
            var baseCode='<iframe src=\"http://portal.incendant.com/HealthLibrary/video.php?scheme=SCHEME&shortcode=SHORTCODE&brief=BRIEF&autoplay=AUTOPLAY\" width=\"WIDTH\" height=\"HEIGHT\" frameborder=\"0\"><a href=\"http://portal.incendant.com/HealthLibrary/video.php?scheme=SCHEME&shortcode=SHORTCODE&brief=BRIEF&autoplay=AUTOPLAY\">Incendant Video</a></iframe>';
        
            function updateWidget() {
                var width = document.getElementById("width").value;
                var height = document.getElementById("height").value;
                var scheme = document.getElementById("scheme").value;
                var shortcode = document.getElementById("shortcode").value;
                var brief = document.getElementById("brief").value;
                var autoplay = document.getElementById("autoplay").checked;
                
                var iframeEl = document.getElementById("iframe");
                iframeEl.width = width;
                iframeEl.height = height;
                iframeEl.src = "http://portal.incendant.com/HealthLibrary/video.php?scheme="+scheme+"&shortcode="+shortcode+"&brief="+brief+"&autoplay="+autoplay;
                
                var code = document.getElementById("widgetCode");
                var output = baseCode.replaceAll("WIDTH",width);
                output = output.replaceAll("HEIGHT",height);
                output = output.replaceAll("SCHEME",scheme);
                output = output.replaceAll("SHORTCODE",shortcode);
                output = output.replaceAll("BRIEF",brief);
                output = output.replaceAll("AUTOPLAY",autoplay);
                code.value = output;
            }
            
            function init() {
                updateWidget();
            }
        </script>
    </head>
    <body onload="init()">
        <h1>Incendant Video Configuration Tool</h1>

        <form action="" name="widgetform" id="tform">
            <table width ="100%">
                <tr><td width="30%">Width<font color="red">*</font></td>
                    <td><input class="req" type ="text" name="width" id="width" value ="640px" maxlength="10" /></td></tr>
                <tr><td>Height<font color="red">*</font></td>
                    <td><input class="req" type="text" name="height" id="height" value ="380px" maxlength ="10" /></td></tr>
                <!--tr><td>Video</td>
                    <td><select name="shortcode" id="shortcode" width="300">
                        <option value="AD">Advance Directives</option>
                        <option value="ABS">Abscess</option>
                        <option value="CGR">Hospice Cargiver</option>
                        <option value="NM">Narcotic Medications</option>
                    </select></td></tr-->
                <tr><td>Shortcode (ie. ABS, COP, ...)</td>
                    <td><input type="text" name="shortcode" id="shortcode" value="COP"/></td></tr>
                <tr><td>Short Version</td>
                    <td><input type="checkbox" name="brief" id="brief" value="true"/></td></tr>
                <tr><td>Autoplay</td>
                    <td><input type="checkbox" name="autoplay" id="autoplay" value="true"/></td></tr>
                <tr><td>Color Scheme</td>
                    <td><select name="scheme" id="scheme" width="300">
                        <option value="none">None</option>
                        <option value="app">Default</option>
                        <option value="pmc">ParkView</option>
                        <option value="blue">Blue</option>
                        <option value="red">Red</option>
                        <option value="yellow">Yellow</option>
                        <option value="orange">Orange</option>
                        <option value="brown">Brown</option>
                        <option value="gray">Gray</option>
                    </select></td></tr>
                <tr><td>
                    <button class="button" type="button" onclick="updateWidget();" value="Submit&nbsp&nbsp"><span>Update</span></button>
                    
                </td>
                    <td><button class="button" type="reset"><span>Reset Form</span></button></td></tr>
            </table>
            
        </form>
        <h1>The Widget</h1>
        <iframe id="iframe" frameborder="0">
            Your Browser must support iFrames to use this configurator.
        </iframe>
        <br/>
        <h1>The Code</h1>
        <textarea id="widgetCode" rows="2" cols="50" readonly>
        </textarea>
    </body>
</html>